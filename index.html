<!DOCTYPE html>
<html lang="jp">
<head>
<meta charset="UTF-8">
<title>Add Infobox-HTML</title>
<style>html,body{height:100%;}</style>

<link rel="stylesheet" href="./css/style.css">
</head>
<body>


<!-- MAP[START] -->
<h1><img src="./img/title_yoko.png"></h1>
<div id="myMap" style='width:100%;height:70%;margin: 0 auto;'></div>
<!-- MAP[END] -->


<script src='https://www.bing.com/api/maps/mapcontrol?callback=' async defer></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script>
<script src="./js/jquery-2.1.3.min.js"></script>
<script src="./js/BmapQuery.js"></script>
<script src="./js/hinafeslist2024.js"></script>
<script>
//****************************************************************************************
// BingMaps&BmapQuery
//****************************************************************************************
//Init
function GetMap(){
    //------------------------------------------------------------------------
    //1. Instance
    //------------------------------------------------------------------------
    const map = new Bmap("#myMap");

    //------------------------------------------------------------------------
    //2. Display Map
    //------------------------------------------------------------------------
    map.startMap(35.681236, 139.767125, "grayscale", 13); //The place is Bellevue.

    //----------------------------------------------------
    //3. Add Pushpin
    // pin(lat, lon, "color", [drag:true|false], [click:true|false], [hover:true|false], [visible:true|false]);
    //----------------------------------------------------
    // let pin = map.pin(35.681236, 139.767125, "#ff0000");
    // let pin2 = map.pinText(35.681236, 139.767125, "title","subtitle","Click");
    map.infoboxHtml(35.681236, 139.767125, '<a id="tokyopin"><img src="./img/pin2.png" class="pinclick"></div></a>');   
    map.infoboxHtml(35.681236, 139.767125, '<div class="infobox" id="tokyo"><p class="place">場所</p><p class="title">展覧会名</p><p class="period">2024年5月10日~6月80日</p></div>');
    // map.onPin(pin2, "click", function(){
 
       
    //     $("#tokyo").css("display","box");

    // });
    
    //----------------------------------------------------
    //4. Add Infobox-HTML
    // infoboxHtml(lat, lon, html);
    //----------------------------------------------------
    $(document).on("click", "#tokyopin", function(){


console.log("ピンがクリックされました");
    // $("#hina_1").css(); 
})
    
    
let HinaInfo = "";
let Hinaplace = "";
let HinaPeriod = "";
let HinaTitle = "";
let HinaLat = "";
let HinaLon = "";
let HinaId = "";
for(let i=0; i<12; i++){

HinaPlace = hinafes2024[i].place;
HinaPeriod = hinafes2024[i].period;
HinaTitle = hinafes2024[i].title;
HinaLat = hinafes2024[i].lat;
HinaLon = hinafes2024[i].lon;
HinaId = "hina_" + i ;
HinaPinId = "hinapin_" + i ;

    // console.log("回:"+ i);
    // console.log("施設名:"+ HinaPlace);
    // console.log("タイトル:"+ HinaTitle);
    // console.log("期間:"+ HinaPeriod);

// let pin = map.pinIcon(HinaLat, HinaLon, "./img/pin.png", 0.6, 14, 50);
map.infoboxHtml(HinaLat, HinaLon, '<a href="#"><img src="./img/pin.png" id="'+ HinaPinId +'" class="pinclick"></div></a>');   
map.infoboxHtml(HinaLat, HinaLon, '<div id="'+ HinaId +'" class="infobox"><p class="place">' + HinaPlace + '</p><p class="title">' + HinaTitle + '</p><p class="period">' + HinaPeriod + '</p></div>');

}

}



</script>

</body>
</html>
